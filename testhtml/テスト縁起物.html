<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>特集ページ | 銀座田屋</title>

  <!-- ローカル用 base設定（file:/// ← スラッシュ3本） -->
  <base href="file:///C:/Users/youko/Desktop/testhtml/">

  <!-- CSSのパスは / でOK -->
  <link rel="stylesheet" href="/css/usr/nabe.css">
  <link rel="stylesheet" href="/css/usr/item_list.css">
</head>

<body>

<section class="main-visual">
  <img src="/img/usr/feature/eto/uma_mv_pc.jpg" alt="向かい干支のモデル写真">
  <div class="caption">
    2026干支コレクション
    <span>丙午 / 行動力・勝負運・勢い・華やかさ</span>
  </div>
</section>

  <!-- セクション01 -->
  <section class="block">
    <h1>丙午-駆け上がる、前進の年<span>The Hinoeuma Motif</span></h1>
    <p class="lead">
      自らの信念を胸に、未来へと駆ける一年。<br>
    「午」は、勢いと躍動を象徴する干支。<br>
    銀座田屋はその力強さを、シルクの織りで優美に表現しました。<br><br>
    光を受けて艶めく馬の姿が、首元に確かな存在感を与える。<br>
    行動の年を象徴する、特別な一本をあなたに。
    </p>
  </section>

<!-- セクション02：2カラム構成 -->
<section class="block block-2col block-tight-bottom">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/umapanel01.jpg" alt="午柄のパネルネクタイ">
  </div>

  <div class="block-visual">
    <img src="/img/usr/feature/eto/umapanel02.jpg" alt="午柄のパネルネクタイ">
  </div>

  </div>
</section>

<!-- セクション01 -->
<section class="block block-tight-top">
  <h2>駆け上がる<span>The Hinoe Uma Panel Tie</span></h2>
  <p class="lead">
    大地を駆ける、その瞬間を織りで描く。<br>
  大胆な馬のパネル柄に、力と気品が宿る。<br>
    ひと結びで、前へ進む勇気を纏う、首元に勝負の美学。<br><br>

    丙午-ひのえうま-／パネル 22,000円(税込)<br>
  </p>

  <div class="btn-wrap">
    <a href="/shop/g/g452-027-230-071/" class="taya-btn">商品ページへ</a>
  </div>
</section>




<!-- セクション02：2カラム構成 -->
<section class="block block-2col block-wide-top">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/umas01.jpg" alt="馬柄のネクタイ">
  </div>

  <div class="block-text">
    <p class="title-sub">天馬の群れ</p>
    <p class="lead-sub">
     自由と気品を併せ持つ、駿馬。<br>
  走るほどに風が生まれ、道がひらける。<br>
  その姿は、限りない可能性の象徴。<br><br>

    天馬の群れ／パネル 22,000円(税込)<br>
  </p>

    <div class="block-subimg">
      <img src="/img/usr/feature/eto/umas01up.jpg" alt="天馬の群れ ネクタイ ディテール">
    </div>

  <div class="btn-wrap">
    <a href="/shop/g/g452-027-230-071/" class="taya-btn">商品ページへ</a>
  </div>
  </div>
</section>


<!-- セクション02：2カラム構成 -->
<section id="ne-nav" class="block block-2col block-wide-top">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/umas02.jpg" alt="馬柄のネクタイ">
  </div>

  <div class="block-text">
    <p class="title-sub">馬場の春</p>
    <p class="lead-sub">
      小寒、大寒、立春。<br>
      霜を踏みしめ、春を告げる蹄の音。<br>
  新たな季節への、力強い一歩。<br><br>

    馬場の春／総柄 16,500円(税込)<br>
  </p>

    <div class="block-subimg">
      <img src="/img/usr/feature/eto/umas02up.jpg" alt="天馬の群れ ネクタイ ディテール">
    </div>

  <div class="btn-wrap">
    <a href="/shop/g/g452-027-230-071/" class="taya-btn">商品ページへ</a>
  </div>
  </div>
</section>


<hr class="taya-line">


    <!-- セクション02 -->
  <section class="block">
    <h2>十二支を織る<span>The Twelve Zodiac Motifs</span></h2>
    <p class="h2-lead">
     「干支をまとう」という、日本人の美意識。<br>
        十二の動物に込められた想いや願いを、銀座田屋の織りで表現しました。<br>
        それぞれの干支がもつ力を、胸元にそっと添えてみてください。</p>

          <!--十二支ナビ -->
  <nav class="eto-nav">
    <a href="#ne-nav">|子|</a>
    <a href="#ushi-nav">|丑|</a>
    <a href="#tora-nav">|寅|</a>
    <a href="#u-nav">|卯|</a>
    <a href="#tatsu-nav">|辰|</a>
    <a href="#mi-nav">|巳|</a>
    <a href="#uma-nav">|午|</a>
    <a href="#hitsuji-nav">|未|</a>
    <a href="#saru-nav">|申|</a>
    <a href="#tori-nav">|酉|</a>
    <a href="#inu-nav">|戌|</a>
    <a href="#i-nav">|亥|</a>
  </nav>
</section>



<!-- セクション02：2カラム構成 -->
<section id="ne-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/nezumi.jpg" alt="子・鼠のシルエットのイメージ">
  </div>

  <div class="block-text">
    <h3>子 ― 静寂の中の智慧（ちえ）</h3>
    <p class="h3-lead-left">
      夜明け前の静けさに、小さな足音が響く。<br>
      ねずみは繁栄と知恵の象徴。<br>
      慎ましくも聡明に、新しい時代の扉を開く。<br>
      静寂の中に、未来への光を見いだす存在。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="items" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<!-- スクリプトを後ろに配置 -->
<script src="/visumo/js/all_items21.js" defer></script>　<!--同じページ内で二回スクリプトを使うときは二回目のスクリプトからこの記述を消して。二回読んじゃうから-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "ネズミ|鼠|ねずみ",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("items");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>




<!-- セクション02：2カラム構成 -->
<section id="ushi-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/ushi.jpg" alt="丑・牛のシルエットのイメージ">
  </div>

  <div class="block-text">
    <h3>丑 ― 忍耐と誠実の歩み</h3>
    <p class="h3-lead-left">
      焦らず、迷わず、道を歩む。<br>
丑は忍耐と誠実の象徴。<br>
どんな時も揺るがぬ心で、成果を育む。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="ushi" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "丑|牛|うし|ウシ",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("ushi");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>




<!-- セクション02：2カラム構成 -->
<section id="tora-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/tora.jpg" alt="寅・虎のシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>寅 ― 勇気は、静かに燃える</h3>
    <p class="h3-lead-left">
      風を切り、己を貫く。<br>
寅は決断と勇気の象徴。<br>
強さの中に、しなやかな誇りを。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="tora" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "寅|虎|とら",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("tora");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>



<!-- セクション02：2カラム構成 -->
<section id="u-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/u.jpg" alt="卯・兎・ウサギのシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>卯 ― 優しさが、未来を跳ねる</h3>
    <p class="h3-lead-left">
      柔らかな光のなかで、そっと弾む生命。<br>
卯は調和と飛躍の象徴。<br>
穏やかな優しさが、明日を動かす。
    </p>
  </div>
</section>





<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="u" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "ウサギ|兎|卯",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("u");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>





<!-- セクション02：2カラム構成 -->
<section id="tatsu-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/tatsu.jpg" alt="辰・龍・ドラゴンのシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>辰 ― 上昇の気、天を翔ける</h3>
    <p class="h3-lead-left">
      大地を揺らし、雲を呼ぶ。<br>
辰は唯一の幻獣。力と繁栄を司る。<br>
上昇の気を、己の内に宿す。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="tatsu" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "龍|竜|ドラゴン",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("tatsu");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>





<!-- セクション02：2カラム構成 -->
<section id="mi-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/mi.jpg" alt="蛇・へび・ヘビのシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>巳 ― 再生の知恵、静寂の力</h3>
    <p class="h3-lead-left">
      皮を脱ぎ、また新たな姿で生まれ変わる。<br>
巳は知恵と再生の象徴。<br>
変化を恐れず、常に進化する精神を。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="mi" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "蛇|ヘビ|へび",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("mi");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>





<!-- セクション02：2カラム構成 -->
<section id="uma-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/uma.jpg" alt="午・馬・ウマのシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>午 ― 駆ける、美しき前進</h3>
    <p class="h3-lead-left">
      大地を蹴り、風を切る。<br>
午は行動と成功の象徴。<br>
自らの力で、未来を拓く。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="uma" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "馬|ウマ|うま",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("uma");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>



<!-- セクション02：2カラム構成 -->
<section id="hitsuji-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/hitsuji.jpg" alt="午・馬・ウマのシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>未 ― やわらぎの、ひととき</h3>
    <p class="h3-lead-left">
      柔らかな光に包まれ、心を休める。<br>
未は平和と調和の象徴。<br>
穏やかな時間が、豊かさを紡ぐ。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="hitsuji" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "羊|ひつじ|ヒツジ",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("hitsuji");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>





<!-- セクション02：2カラム構成 -->
<section id="saru-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/saru.jpg" alt="猿のシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>申 ― 知恵は、遊びの中にある</h3>
    <p class="h3-lead-left">
      軽やかに枝を渡り、世界を眺める。<br>
申は機知と柔軟の象徴。<br>
自由な発想が、新しい道をつくる。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="saru" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "猿|さる|サル|申|ニホンザル",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("saru");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>





<!-- セクション02：2カラム構成 -->
<section id="tori-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/tori.jpg" alt="鶏のシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>酉 ― 成熟は、静かに香る</h3>
    <p class="h3-lead-left">
     朝を告げ、日を招く。<br>
酉は収穫と完成の象徴。v
努力が実る瞬間の美を。<br>
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="tori" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "鶏|ニワトリ|鳥",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("tori");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>




<!-- セクション02：2カラム構成 -->
<section id="inu-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/inu.jpg" alt="犬のシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>戌 ― 守りと誠実のこころ</h3>
    <p class="h3-lead-left">
     主を想い、家族を守る。<br>
戌は忠義と安心の象徴。<br>
信頼が織りなす温もりを。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="inu" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "犬|ドック|いぬ",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("inu");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>





<!-- セクション02：2カラム構成 -->
<section id="i-nav" class="block block-2col">
  <div class="block-visual">
    <img src="/img/usr/feature/eto/i.jpg" alt="猪のシルエットのイメージ画像">
  </div>

  <div class="block-text">
    <h3>亥 ― まっすぐに、生きる</h3>
    <p class="h3-lead-left">
     一筋の道を、力強く駆け抜ける。<br>
亥は勇気と情熱の象徴。<br>
純粋な意志が、困難を打ち破る。
    </p>
  </div>
</section>




<!-- 商品リスト（これがないと #items が見つからない） -->
<div id="i" class="item-list"></div>  <!--同じページで2回使う時は id="items" を別名にする。id="ascot"　// ===== 4) 実行 =====のconst名も-->

<script defer>
window.addEventListener('DOMContentLoaded', () => {
  if (typeof allItems === 'undefined') {
    console.error("allItems が見つかりません。");
    return;
  }

  console.log("allItems:", allItems.length, "件");

  // ===== 1) フィルター条件 =====
  const filterConditions = {
    id: "",                        // 部分一致OK
    id_list: [],                   // 完全一致リスト（例: ["422-028-011-071", "422-028-013-071"]）
    name: "猪|いのしし|亥",         // 部分一致（例: "鶴|つる"）（複数条件は|を使ってね）
    category: "tie",             // カテゴリ
    category2: "",                 // サブカテゴリ
    color: "",                     // 色（例: "ネイビー"）
    material: "",                  // 素材
    origin: "",                    // 原産国（例: "日本"）
    price_min: "",                 // 最低価格
    price_max: "",                 // 最高価格
    description: ""                // 商品説明に含まれる文字
  };

  // ===== 2) サポート関数 =====
  function safeIncludes(hay, needle) {
    if (needle === "") return true;
    if (hay == null) return false;

  // 「|」で区切られた複数キーワードに対応
  const pattern = new RegExp(needle.split("|").join("|"), "i");
  return pattern.test(String(hay));
  }

  // ===== 3) フィルター本体 =====
  function filterItems(items, cond) {
    const out = [];

    for (const it of items) {
      if (cond.id_list.length && !cond.id_list.includes(it.id)) continue;
      if (!safeIncludes(it.id, cond.id)) continue;
      if (!safeIncludes(it.name, cond.name)) continue;
      if (!safeIncludes(it.category, cond.category)) continue;
      if (!safeIncludes(it.category2, cond.category2)) continue;
      if (!safeIncludes(it.color, cond.color)) continue;
      if (!safeIncludes(it.material, cond.material)) continue;
      if (!safeIncludes(it.origin, cond.origin)) continue;
      if (cond.description && !safeIncludes(it.description, cond.description)) continue;
      if (cond.price_min && Number(it.price) < cond.price_min) continue;
      if (cond.price_max && Number(it.price) > cond.price_max) continue;
      if (it.stock_flag != 1 && it.stock_flag != "1") continue;
      out.push(it);
    }
    console.log("filtered:", out.length, "件");
    return out;
  }

 // ===== 4) 実行 =====
  const filtered = filterItems(allItems, filterConditions);
  const container = document.getElementById("i");
  if (!container) return;

  let displayCount = 4; // 初期表示件数

// 品番の大きい順（新作順）
filtered.sort((a, b) => {
  const numA = parseInt(a.id.replace(/\D/g, ""), 10);
  const numB = parseInt(b.id.replace(/\D/g, ""), 10);
  return numB - numA;
});
 
// ===== 4.5) 同柄の重複除去 =====
function uniqueByPattern(items) {
  const seen = new Set();
  const unique = [];
  for (const it of items) {
    const key = it.id.replace(/-\d{3}$/, ""); // 末尾3桁をカット
    if (!seen.has(key)) {
      seen.add(key);
      unique.push(it);
    }
  }
  return unique;
}

// ===== 5) 表示レンダリング関数 =====
function renderItems() {
  const unique = uniqueByPattern(filtered); // 同柄1つずつ
  let showItems = [];

  // --- ステップ1：初期表示（重複除外） ---
  if (displayCount <= unique.length) {
    showItems = unique.slice(0, displayCount);
  } 
  // --- ステップ2：2回目以降（色違い含め順次追加） ---
  else {
    const extraCount = displayCount - unique.length;

    // まず全てのuniqueをベースに
    showItems = [...unique];

    // uniqueのIDをSet化（既に出ている柄）
    const seen = new Set(unique.map(it => it.id.replace(/-\d{3}$/, "")));

    // filtered全体から「uniqueで出た柄以外 or 同柄の色違い」を順に追加
    const remaining = filtered.filter(it => !seen.has(it.id.replace(/-\d{3}$/, "")) || !showItems.includes(it));

    // 重複を避けながら extraCount 件だけ追加
    showItems = [...showItems, ...remaining.slice(0, extraCount)];
  }

  // --- HTML生成 ---
  container.innerHTML = showItems.map(i => {
    let hoverImg = i.img_main;
    if (Array.isArray(i.img_sub)) {
      const found = i.img_sub.find(path => path.includes("/img/goods/9/"));
      if (found) hoverImg = found;
    }

    const newLabel = (i.new_icon == 1 || i.new_icon == "1")
      ? '<span class="label-new"></span>'
      : '';

    return `
      <a class="item" href="${i.url}" target="_blank" rel="noopener">
        <div class="img-wrap">
          ${newLabel}
          <img src="${i.img_main}" alt="${i.name}"
               onmouseover="this.src='${hoverImg}'"
               onmouseout="this.src='${i.img_main}'">
        </div>
        <div class="item-info">
          <div class="item-name">${i.name}</div>
          <div class="item-price">￥${Number(i.price).toLocaleString()}(税込)</div>
        </div>
      </a>
    `;
  }).join("");

  // --- ボタン制御 ---
  if (showItems.length >= filtered.length) {
    moreBtn.style.display = "none";
  } else {
    moreBtn.style.display = "block";
  }
}

  // ===== 6) 「もっと見る」ボタン =====
  const moreBtn = document.createElement("div");
  moreBtn.className = "more-button";
  moreBtn.innerHTML = `<button>もっと見る</button>`;
  container.after(moreBtn);

  moreBtn.addEventListener("click", () => {
    displayCount += 10;
    renderItems();
  });

  // 初回描画
  renderItems();
});
</script>


<hr class="taya-line">


    <!-- セクション02 -->
  <section class="block">
    <h2>向かい干支とは？<span>The Twelve Zodiac Motifs</span></h2>
    <p class="h2-lead">
   向かい干支とは、十二支を円に並べた時に、<br>
        自分の干支の向かい側に来る干支を指します。<br>
        例えば、辰の向かい干支は戌に、子の向かい干支は午になります。<br><br>
      向かい干支は、自分の干支とは正反対の性質を持っており、<br>大切にすると自分が持っていないものを補ってくれる「守り干支」と云われています。</p>
    </section>


    <section class="block-photo">
  <img src="/img/usr/feature/eto/eto2024.jpg" alt="向かい干支の説明写真">
</section>

<hr class="taya-line">


<!-- セクション01 -->
<section class="block block-half">
  <h2>関連コンテンツ<span>CONTENTS</span></h2>
</section>


<!-- 2カラム：写真＋文章 × 2 -->
<section class="block grid-2up block block-half">
  
  <!-- 左カラム -->
  <article class="card">
    <div class="card-media">
      <a href="https://www.ginza-taya.co.jp/shop/pages/name.aspx" target="_blank">
        <img src="/img/usr/feature/eto/name1.jpg" alt="ネクタイ刺繍入れ案内">
      </a>
    </div>
    <div class="card-body">
      <div class="block-text">
    <h3>名入れ刺繍</h3>
    <p class="h3-lead-left">
     あなたの選んだ一本を特別な一本に。<br>
プレゼント、ギフトにもお勧めな名入れ刺繍。
    </p>
    </div>
  </article>

  <!-- 右カラム -->
  <article class="card">
    <div class="card-media">
      <a href="https://www.ginza-taya.co.jp/shop/pages/gift.aspx" target="_blank">
        <img src="/img/usr/feature/eto/gift.jpg" alt="ギフト用ネクタイ案内">
      </a>
    </div>
    <div class="card-body">
    <div class="block-text">
    <h3>想いの伝わる贈り物</h3>
    <p class="h3-lead-left">
     贈りたいのは、真心とギフト。<br>
心を込めた田屋のギフト＆セオリー。
    </p>
    </div>
  </article>
</section>


</body>
</html>
